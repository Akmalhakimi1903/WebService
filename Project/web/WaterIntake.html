<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Water Intake Calculator</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      max-width: 700px;
      margin: 40px auto;
      padding: 20px;
      background: linear-gradient(to right, #e0f7fa, #ffffff);
      border-radius: 10px;
      box-shadow: 0 0 12px rgba(0,0,0,0.1);
    }
    h1 {
      text-align: center;
      color: #007acc;
      margin-bottom: 10px;
    }
    label {
      font-weight: bold;
      display: block;
      margin-top: 15px;
      color: #333;
    }
    input[type="number"] {
      width: 100%;
      padding: 10px;
      margin-top: 5px;
      border-radius: 6px;
      border: 1px solid #ccc;
      box-sizing: border-box;
    }
    button {
      margin-top: 20px;
      background-color: #007acc;
      color: white;
      border: none;
      padding: 12px 24px;
      cursor: pointer;
      border-radius: 6px;
      font-size: 16px;
      transition: background 0.3s ease;
    }
    button:hover {
      background-color: #005f99;
    }
    .result {
      margin-top: 30px;
      padding: 20px;
      background: #ffffff;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    .result p {
      margin: 8px 0;
    }
    #backButton {
      display: none;
      margin-top: 20px;
      width: 100%;
    }

    .quote-box {
      margin-top: 30px;
      padding: 15px;
      border-left: 4px solid #007acc;
      background: #f0f9ff;
      border-radius: 6px;
      font-style: italic;
      font-size: 1.1em;
      color: #333;
      animation: fadeIn 2s ease;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
  </style>
</head>
<body>
  <h1>üíß Water Intake Calculator</h1>

  <form id="waterForm">
    <label for="activityMinutes">Activity Duration (minutes):</label>
    <input type="number" id="activityMinutes" name="activityMinutes" min="0" placeholder="Enter activity duration" required />
    <button type="submit">Calculate Water Intake</button>
  </form>

  <div class="result" id="result" style="display:none;">
    <h2>Water Intake Result</h2>
    <p><strong>Name:</strong> <span id="resName"></span></p>
    <p><strong>Age:</strong> <span id="resAge"></span></p>
    <p><strong>Gender:</strong> <span id="resGender"></span></p>
    <p><strong>Weight (kg):</strong> <span id="resWeight"></span></p>
    <p><strong>Height (cm):</strong> <span id="resHeight"></span></p>
    <p><strong>Activity Duration (minutes):</strong> <span id="resActivity"></span></p>
    <p><strong>Recommended Water Intake (liters):</strong> <span id="resWaterIntake"></span></p>

    <div class="quote-box" id="quoteBox"></div>
  </div>

  <button id="backButton" type="button">üîô Back to Calculator</button>

  <script>
    const params = new URLSearchParams(window.location.search);
    const userData = {
      name: params.get("name") || "Unknown",
      age: parseInt(params.get("age")) || 0,
      gender: params.get("gender") || "-",
      weight: parseFloat(params.get("weight")) || 0,
      height: parseFloat(params.get("height")) || 0,
      ic: params.get("ic") || ""
    };

    const quotes = [
      "‚ÄúDrinking water is like washing out your insides.‚Äù ‚Äì Kevin R. Stone",
      "‚ÄúPure water is the world‚Äôs first and foremost medicine.‚Äù ‚Äì Slovakian Proverb",
      "‚ÄúYou are not sick, you are thirsty. Don‚Äôt treat thirst with medication.‚Äù ‚Äì F. Batmanghelidj",
      "‚ÄúWater is life‚Äôs matter and matrix, mother and medium. There is no life without water.‚Äù ‚Äì Albert Szent-Gyorgyi",
      "‚ÄúThousands have lived without love, not one without water.‚Äù ‚Äì W.H. Auden",
      "‚ÄúStay hydrated, stay healthy.‚Äù ‚Äì Anonymous"
    ];

    function getRandomQuote() {
      return quotes[Math.floor(Math.random() * quotes.length)];
    }

    function calculateWaterIntake(weightKg, activityMinutes) {
      const baseMl = 35 * weightKg;
      const activityMl = 12 * activityMinutes;
      const totalMl = baseMl + activityMl;
      return (totalMl / 1000).toFixed(2); 
    }

    document.getElementById("waterForm").addEventListener("submit", function (e) {
      e.preventDefault();

      const activityMinutes = parseInt(document.getElementById("activityMinutes").value);

      if (isNaN(activityMinutes) || activityMinutes < 0) {
        alert("Please enter a valid activity duration.");
        return;
      }

      const waterIntake = calculateWaterIntake(userData.weight, activityMinutes);

      document.getElementById("resName").textContent = userData.name;
      document.getElementById("resAge").textContent = userData.age;
      document.getElementById("resGender").textContent = userData.gender;
      document.getElementById("resWeight").textContent = userData.weight.toFixed(1);
      document.getElementById("resHeight").textContent = userData.height.toFixed(1);
      document.getElementById("resActivity").textContent = activityMinutes;
      document.getElementById("resWaterIntake").textContent = waterIntake;

      document.getElementById("quoteBox").textContent = getRandomQuote();

      document.getElementById("result").style.display = "block";
      document.getElementById("backButton").style.display = "block";
      document.getElementById("result").scrollIntoView({ behavior: "smooth" });
    });

    document.getElementById("backButton").addEventListener("click", function () {
      const query = new URLSearchParams({
        name: userData.name,
        age: userData.age,
        gender: userData.gender,
        weight: userData.weight,
        height: userData.height,
        ic: userData.ic
      }).toString();
      window.location.href = `index.html?${query}`;
    });
  </script>
</body>
</html>
