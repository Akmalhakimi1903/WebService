<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Calories Burn Calculator</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 600px;
      margin: 40px auto;
      padding: 20px;
      background: #f9f9f9;
      border-radius: 8px;
      box-shadow: 0 0 8px rgba(0,0,0,0.1);
    }
    label {
      font-weight: bold;
      display: block;
      margin-top: 15px;
    }
    input[type="radio"] {
      margin-right: 8px;
      cursor: pointer;
    }
    button {
      margin-top: 20px;
      background-color: #007acc;
      color: white;
      border: none;
      padding: 10px 20px;
      cursor: pointer;
      border-radius: 4px;
      font-size: 16px;
    }
    button:hover {
      background-color: #005f99;
    }
    .result {
      margin-top: 30px;
      padding: 15px;
      background: white;
      border-radius: 6px;
      box-shadow: 0 0 6px rgba(0,0,0,0.1);
    }
    .result p {
      margin: 8px 0;
    }
    span {
      font-weight: bold;
    }
  </style>
</head>
<body>

  <h1>Calories Burn Calculator</h1>

  <form id="calorieForm">
    <label>Select Activity Level:</label>
    <label><input type="radio" name="activityLevel" value="1.2" required /> Sedentary (little or no exercise)</label>
    <label><input type="radio" name="activityLevel" value="1.375" /> Lightly active (light exercise 1-3 days/week)</label>
    <label><input type="radio" name="activityLevel" value="1.55" /> Moderately active (moderate exercise 3-5 days/week)</label>
    <label><input type="radio" name="activityLevel" value="1.725" /> Active (hard exercise 6-7 days/week)</label>
    <label><input type="radio" name="activityLevel" value="1.9" /> Very active (very hard exercise & physical job)</label>

    <button type="submit">Calculate Calories Burn</button>
  </form>

  <div class="result" id="result" style="display:none;">
    <p>Name: <span id="name"></span></p>
    <p>Age: <span id="age"></span></p>
    <p>Gender: <span id="gender"></span></p>
    <p>Weight (kg): <span id="weight"></span></p>
    <p>Height (cm): <span id="height"></span></p>
    <p>Activity Level: <span id="activityLevelDisplay"></span></p>
    <p><strong>BMR (Basal Metabolic Rate):</strong> <span id="bmr"></span> kcal/day</p>
    <p><strong>Calories Burned:</strong> <span id="caloriesBurned"></span> kcal/day</p>
  </div>

  <button id="backButton" type="button">Back to Calculator</button>

  <script>
    const params = new URLSearchParams(window.location.search);
    const userData = {
      name: params.get("name") || "Unknown",
      age: params.get("age") || "N/A",
      gender: params.get("gender") || "N/A",
      weight: params.get("weight") || "N/A",
      height: params.get("height") || "N/A",
      ic: params.get("ic") || "",
      bmr: parseFloat(params.get("bmr")) || 0
    };

    // Fill user info
    function fillUserData() {
      document.getElementById("name").textContent = userData.name;
      document.getElementById("age").textContent = userData.age;
      document.getElementById("gender").textContent = userData.gender;
      document.getElementById("weight").textContent = userData.weight;
      document.getElementById("height").textContent = userData.height;
      document.getElementById("bmr").textContent = userData.bmr.toFixed(2);
    }
    fillUserData();

    document.getElementById("calorieForm").addEventListener("submit", function(e) {
      e.preventDefault();
      const radios = document.getElementsByName("activityLevel");
      let multiplier = null;
      let activityText = "";
      for(let radio of radios) {
        if(radio.checked) {
          multiplier = parseFloat(radio.value);
          activityText = radio.parentNode.textContent.trim();
          break;
        }
      }
      if (multiplier === null) {
        alert("Please select an activity level.");
        return;
      }
      const caloriesBurned = userData.bmr * multiplier;

      document.getElementById("activityLevelDisplay").textContent = activityText;
      document.getElementById("caloriesBurned").textContent = caloriesBurned.toFixed(2);

      document.getElementById("result").style.display = "block";
    });

    document.getElementById("backButton").addEventListener("click", function () {
      const query = new URLSearchParams({
        name: userData.name,
        age: userData.age,
        gender: userData.gender,
        weight: userData.weight,
        height: userData.height,
        ic: userData.ic,
        bmr: userData.bmr
      }).toString();
      window.location.href = `index.html?${query}`;
    });
  </script>
</body>
</html>
